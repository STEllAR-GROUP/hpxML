# HPX ClangTool

We introduce a new ClangTool `LoopConvert.cpp` using LibTooling `libtooling` as a custom compiler pass to be executed by the Clang compiler, which is intended to collect the static features at compile time. The logistic regression model is implemented as a learning model that considers these captured features and the dynamic information as provided by the runtime system for predicting efficient parameters for an hpx loop. 

For implementing this learning model on a loop, we propose new execution policies and parameters, `par_if` `make_prefetcher_policy` and `adaptive_chunk_size`, that -- when used on a parallel loop -- instructs the compiler to apply this tool on that loop. As a results, the Clang compiler transforms certain loops which were annotated by the user by providing these special execution policies into code controlling runtime behavior. This transformed code instructs the runtime system to apply a logistic regression model and to select either an appropriate code path (e.g. parallel or sequential loop execution) or certain parameters for the loop execution itself (e.g. chunk size or prefetching distance). This technique enables a runtime decision which ensures best possible performance of the loop under consideration. 